From ac6c82bad495f1cff6d34b243a7dd3df4cd75ddd Mon Sep 17 00:00:00 2001
From: hushijia <hushijia@uniontech.com>
Date: Thu, 14 May 2020 11:47:57 +0800
Subject: [PATCH 17/29] Fix Remove the 'configure current input method 'option.

---
 ...emove-configure-current-input-method.patch | 43 +++++++++++++++++++
 debian/patches/series                         |  1 +
 2 files changed, 44 insertions(+)
 create mode 100644 debian/patches/deepin-remove-configure-current-input-method.patch

diff --git a/debian/patches/deepin-remove-configure-current-input-method.patch b/debian/patches/deepin-remove-configure-current-input-method.patch
new file mode 100644
index 0000000..1d483aa
--- /dev/null
+++ b/debian/patches/deepin-remove-configure-current-input-method.patch
@@ -0,0 +1,43 @@
+Index: fcitx-4.2.9.16/src/module/notificationitem/dbusmenu.c
+===================================================================
+--- fcitx-4.2.9.16.orig/src/module/notificationitem/dbusmenu.c
++++ fcitx-4.2.9.16/src/module/notificationitem/dbusmenu.c
+@@ -215,6 +215,7 @@ void FcitxDBusMenuDoEvent(void* arg)
+                         fcitx_utils_start_process(args);
+                     }
+                     break;
++#if 0
+                 case 4:
+                     {
+                         FcitxIM* im = FcitxInstanceGetCurrentIM(instance);
+@@ -226,6 +227,7 @@ void FcitxDBusMenuDoEvent(void* arg)
+                         }
+                     }
+                     break;
++#endif
+                 case 5:
+                     fcitx_utils_launch_configure_tool();
+                     break;
+@@ -348,10 +350,12 @@ void FcitxDBusMenuFillProperty(FcitxNoti
+                     value = "separator";
+                     FcitxDBusMenuAppendProperty(&sub, properties, "type", DBUS_TYPE_STRING, &value);
+                     break;
++#if 0
+                 case 4:
+                     value = _("Configure Current Input Method");
+                     FcitxDBusMenuAppendProperty(&sub, properties, "label", DBUS_TYPE_STRING, &value);
+                     break;
++#endif
+                 case 5:
+                     value = _("Configure");
+                     FcitxDBusMenuAppendProperty(&sub, properties, "label", DBUS_TYPE_STRING, &value);
+@@ -540,7 +544,9 @@ void FcitxDBusMenuFillLayooutItem(FcitxN
+                     }
+                     FcitxDBusMenuFillLayooutItemWrap(notificationitem, ACTION_ID(0,3), depth - 1, properties, &array);
+                 }
++#if 0
+                 FcitxDBusMenuFillLayooutItemWrap(notificationitem, ACTION_ID(0,4), depth - 1, properties, &array);
++#endif
+                 FcitxDBusMenuFillLayooutItemWrap(notificationitem, ACTION_ID(0,5), depth - 1, properties, &array);
+                 FcitxDBusMenuFillLayooutItemWrap(notificationitem, ACTION_ID(0,6), depth - 1, properties, &array);
+                 FcitxDBusMenuFillLayooutItemWrap(notificationitem, ACTION_ID(0,7), depth - 1, properties, &array);
diff --git a/debian/patches/series b/debian/patches/series
index e38e4a3..85723ab 100644
--- a/debian/patches/series
+++ b/debian/patches/series
@@ -9,3 +9,4 @@
 #nodisplay.patch
 translate-fcitx-to-chinese.patch
 deepin-active-input-method-default.patch
+deepin-remove-configure-current-input-method.patch
-- 
2.20.1

